---
title: 'AWS EC2 Deployment'
description: 'How to deploy OpenOps on an AWS EC2 instance'
icon: 'aws'
---

import AutoInstall from '/snippets/auto-install.mdx'
import Disclaimer from '/snippets/non-production-disclaimer.mdx';
import ExternalDatabases from '/snippets/external-databases.mdx';
import HostValidation from '/snippets/host-validation.mdx';
import JoinCommunity from '/snippets/join-community.mdx'
import ManualInstall from '/snippets/manual-install.mdx';
import { NarrowImage } from '/snippets/narrow-image.jsx'
import NetworkPorts from '/snippets/network-ports.mdx';
import TLS from '/snippets/tls.mdx';
import UpdateLink from '/snippets/update-link.mdx';

<Disclaimer/>

This guide explains how to install the OpenOps Docker Compose release on a newly created EC2 instance.

It assumes you have appropriate permissions on an existing AWS account.

## Initial deployment

### Create a new EC2 instance

1. On the EC2 home page, click **Launch Instance**:
    <NarrowImage src="/images/deploy-aws-launch-instance.png" alt="Launch instance" />
2. Choose a name for your instance and configure the following settings:
    * **Application and OS Images (Amazon Machine Image)**
        - Choose **Ubuntu** as the instance image, as it simplifies Docker installation. Ubuntu Server 24.04 LTS was the latest available version when this guide was written.
        - Keep **64-bit (x86)** as the instance architecture.
    * **Instance type**. The *t3.large* instance type provides decent performance. You can choose a different type according to your needs, but it's not recommended to select a size smaller than *t3.medium*.
    * **Key pair (login)**. Creating a new SSH key pair is recommended but not mandatory.
    * **Network settings**. Allow SSH traffic from your own IP address:
      ![Network settings](/images/deploy-aws-network-settings.png)
    * **Configure storage**. Choose **50GB** to ensure you have enough space for Docker images and databases.
3. In the **Summary** section on the right, click **Launch instance**:
    <NarrowImage src="/images/deploy-aws-launch-instance-2.png" alt="Launch instance" />
4. Once the instance is launched, navigate to instance details by clicking the instance ID:
    ![Instance launched](/images/deploy-aws-instance-launched.png)
5. Configure the network settings and open the necessary ports:
    1. Open the **Security** tab, then click on the security group.
    ![Security tab](/images/deploy-aws-security.png)
    2. Click **Edit inbound rules**.
    3. Add two new rules by clicking **Add rule** each time:
        1. In the first rule, for **Type**, choose **HTTP**, and under **Source**, select **My IP**.
        2. In the second rule, for **Type**, choose **SSH**. Click the text field next to **Source**, and search for `ec2-instance-connect`. Select the prefix list with the full name similar to `com.amazonaws.us-east-1.ec2-instance-connect`, depending on your region. This allows you to connect to the instance via AWS CloudShell.
            ![Prefix lists](/images/deploy-aws-prefix-lists.png)
        The resulting set of inbound rules should look like this:
        ![New inbound rules](/images/deploy-aws-inbound-rules.png)
    4. Click **Save rules** to finish the configuration.

### Connect to the instance with CloudShell

1. Back in the instance details view of your EC2 instance, and click **Connect**.
    <NarrowImage src="/images/deploy-aws-connect.png" alt="Connect" />
2. In the **Connect** view, use default connection settings and click **Connect** again, then wait for CloudShell to initialize an in-browser session.
    ![Connect to instance](/images/deploy-aws-connect-to-instance.png)

### Install OpenOps

<AutoInstall/>

<ManualInstall target="EC2 instance"/>

<NetworkPorts/>

<ExternalDatabases/>

<TLS target="EC2 instance"/>

<HostValidation/>

## Configuring allowed SMTP ports

By default, OpenOps allows SMTP connections on ports 25, 465, 587, and 2525. Administrators can customize which SMTP ports are available by setting the `OPS_SMTP_ALLOWED_PORTS` environment variable in the `.env` file.

To configure allowed SMTP ports, open the `.env` file in your installation folder and set the `OPS_SMTP_ALLOWED_PORTS` variable to a comma-separated list of port numbers:

```shell
OPS_SMTP_ALLOWED_PORTS=25,465,587,2525
```

<Note>Port numbers must be valid TCP ports in the range 1-65535. At least one valid port must be configured. Invalid port numbers will be filtered out.</Note>

After making any changes to the `.env` file, restart the OpenOps containers:

```shell
sudo docker compose down
sudo docker compose up -d
```

<UpdateLink/>

<JoinCommunity/>
